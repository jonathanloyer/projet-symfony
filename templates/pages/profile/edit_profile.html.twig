{% extends 'pages/layout.html.twig' %}

{% block title %}Modifier le Profil{% endblock %}

{% block body %}
<div class="max-w-lg mx-auto mt-10 p-6 bg-white shadow-md rounded">
    <h1 class="text-2xl font-bold mb-5 text-center">Modifier votre Profil</h1>

    {{ form_start(form, {'attr': {'class': 'space-y-4'}}) }}

    {# Afficher les messages flash #}
    {% for message in app.flashes('success') %}
        <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative" role="alert">
            {{ message }}
        </div>
    {% endfor %}

    {# Afficher les erreurs de formulaire globales #}
    {% if form.vars.errors|length > 0 %}
        <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4">
            <ul>
                {% for error in form.vars.errors %}
                    <li>{{ error.message }}</li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}

    {# Champ pour l'avatar #}
    <div class="form-group">
        {{ form_label(form.avatar, 'Avatar', {'label_attr': {'class': 'block text-gray-700 font-bold mb-2'}}) }}
        {{ form_widget(form.avatar, { 'attr': {'class': 'shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline'} }) }}
        {{ form_errors(form.avatar) }}
    </div>

    {# Champ pour le pseudo #}
    <div class="form-group">
        {{ form_label(form.pseudo, 'Pseudo', {'label_attr': {'class': 'block text-gray-700 font-bold mb-2'}}) }}
        {{ form_widget(form.pseudo, { 'attr': {'class': 'shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline'} }) }}
        {{ form_errors(form.pseudo) }}
    </div>

    {# Champ pour la description #}
    <div class="form-group">
        {{ form_label(form.description, 'Description', {'label_attr': {'class': 'block text-gray-700 font-bold mb-2'}}) }}
        {{ form_widget(form.description, { 'attr': {'class': 'shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline'} }) }}
        {{ form_errors(form.description) }}
    </div>

    {# Champ pour l'email #}
    <div class="form-group">
        {{ form_label(form.email, 'Email', {'label_attr': {'class': 'block text-gray-700 font-bold mb-2'}}) }}
        {{ form_widget(form.email, { 'attr': {'class': 'shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline'} }) }}
        {{ form_errors(form.email) }}
    </div>

    {# Champ pour l'emploi #}
    <div class="form-group">
        {{ form_label(form.emploi, 'Emploi', {'label_attr': {'class': 'block text-gray-700 font-bold mb-2'}}) }}
        {{ form_widget(form.emploi, { 'attr': {'class': 'shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline'} }) }}
        {{ form_errors(form.emploi) }}
    </div>

    {# Champ pour le téléphone #}
    <div class="form-group">
        {{ form_label(form.telephone, 'Téléphone', {'label_attr': {'class': 'block text-gray-700 font-bold mb-2'}}) }}
        {{ form_widget(form.telephone, { 'attr': {'class': 'shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline'} }) }}
        {{ form_errors(form.telephone) }}
    </div>

    {# Champ pour l'URL du site #}
    <div class="form-group">
        {{ form_label(form.siteURL, 'URL du site', {'label_attr': {'class': 'block text-gray-700 font-bold mb-2'}}) }}
        {{ form_widget(form.siteURL, { 'attr': {'class': 'shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline'} }) }}
        {{ form_errors(form.siteURL) }}
    </div>

    {# Bouton de soumission #}
    <div class="flex items-center justify-between">
        <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline">
            Enregistrer les modifications
        </button>
    </div>

    {{ form_end(form) }}
</div>
{% endblock %}

